@startuml
!include https://unpkg.com/plantuml-style-c4@latest/core.puml
' uncomment the following line and comment the first to use locally
'!include core.puml
scale 800 width
left to right direction
actor Customer as customer
actor Administrators as admin
actor NotLogin as notLogin
package Shopping {
    usecase "登录" as login
    usecase "注册新用户" as register
    usecase "忘记密码" as forgetPassword
    package "客户管理"{
        usecase "修改密码" as changePassword
        usecase "查看客户列表" as listcustomer
        usecase "新增客户" as addCustomer
        usecase "删除客户" as deleteCustomer
        usecase "批量删除客户" as deleteCustomers
        usecase "重置客户密码" as resetPassword
        usecase "根据条件查询客户" as queryCustomer
    }
    package "商品"{
        usecase "查看商品列表" as listgoods
        usecase "根据条件查询商品" as queryGoods
        usecase "添加商品" as addGoods
        usecase "删除商品" as deleteGoods
        usecase "批量删除商品" as deleteGoodses
        usecase "修改商品" as modifyGoods
        usecase "将商品添加到购物车" as addToShoppingcart
    }
    package "历史订单"{
        usecase "查看所有用户历史订单" as listAllorder
        usecase "根据条件查询订单" as queryOrders
    }
    package "购物车"{
        usecase "查看购物车" as listShoppingcart
        usecase "删除购物车中商品" as deleteShoppingcart
        usecase "批量删除购物车中商品" as deleteShoppingcarts
        usecase "购买购物车中所有商品" as buyShoppingcart
    }
}
notLogin --> login
notLogin --> register
notLogin --> forgetPassword
admin --> changePassword
admin --> listcustomer
admin --> addCustomer
admin --> deleteCustomer
admin --> deleteCustomers
admin --> resetPassword
admin --> listgoods
admin --> queryCustomer
admin --> queryGoods
admin --> addGoods
admin --> deleteGoods
admin --> deleteGoodses
admin --> modifyGoods
admin --> listAllorder
admin --> queryOrders

customer -->changePassword
customer -->listgoods
customer -->queryGoods
customer -->addToShoppingcart
customer -->queryOrders
customer -->listShoppingcart
customer -->deleteShoppingcart
customer -->deleteShoppingcarts
customer -->buyShoppingcart
@enduml
@startuml
participant "用户" as Foo
actor       Actor       as Foo1
boundary    Boundary    as Foo2
control     Control     as Foo3
entity      Entity      as Foo4
database    Database    as Foo5
collections Collections as Foo6
queue       Queue       as Foo7
Foo -> Foo1 : To actor 
Foo -> Foo2 : To boundary
Foo -> Foo3 : To control
Foo -> Foo4 : To entity
Foo -> Foo5 : To database
Foo -> Foo6 : To collections
Foo -> Foo7: To queue
@enduml
@startuml

actor 用户 as user 
control "控制器" as controller
boundary "服务接口" as service
entity "服务实现类" as serviceImpl
boundary "数据访问层" as dao
database "数据库" as db

user -> controller: 发起请求
controller -> service: 调用业务方法
service -> serviceImpl: 调用实现方法
serviceImpl -> dao: 调用数据访问层
dao -> db: 数据库增删改查
db --> dao: 返回结果
dao --> serviceImpl: 返回结果
serviceImpl --> service: 返回结果
service --> controller: 返回结果
controller --> user: 返回响应

@enduml
@startuml
    actor 用户 as user 
    boundary "登录界面" as Login
    control "登录控制器" as LoginController
     boundary "忘记密码界面" as forget
     boundary "注册用户界面" as register
    control "客户控制器" as CustomerController
    database "数据库" as db
    user -> Login:用户登录
    Login -> LoginController: 请求登录
    LoginController-> db: 查询用户信息
    db -> LoginController: 返回查询结果
    LoginController -> Login: 返回登录结果
    user -> forget :填写相关信息找回密码
    forget->CustomerController:重置新的密码
    CustomerController -> db: 更新密码
    db -> CustomerController: 返回更新结果
    CustomerController -> forget: 返回重置密码结果
    user -> register:填写注册信息
    register ->CustomerController:添加新用户
    CustomerController -> db: 添加新用户
    db -> CustomerController: 返回添加结果
    CustomerController -> register: 返回添加结果
@enduml
@startuml
    actor 用户 as user 
    actor 管理员 as admin
    boundary "修改密码界面" as modifyPassword
    boundary "查看客户列表界面" as listCustomer
    control "客户控制器" as customerController
    database "数据库" as db
    user -> modifyPassword:请求修改密码
    admin -> modifyPassword:请求修改密码
    modifyPassword-> customerController:修改用户密码
    customerController -> db: 修改密码
    db -> customerController: 返回修改结果
    customerController -> modifyPassword: 返回修改结果
    admin -> listCustomer:查看所有用户
    listCustomer->customerController:查询所有客户信息
    customerController -> db: 查询所有客户信息
    db -> customerController: 返回查询结果
    customerController -> listCustomer: 查询结果回显
    admin -> listCustomer:填写添加客户信息
    listCustomer->customerController:向数据库中添加客户
    customerController -> db: 向数据库中添加客户
    db -> customerController: 返回添加结果
    customerController -> listCustomer: 返回添加结果
    admin -> listCustomer:请求删除客户
    listCustomer->customerController:删除客户信息
    customerController -> db: 删除客户信息
    db -> customerController: 返回删除结果
    customerController -> listCustomer: 返回删除结果
    admin -> listCustomer:请求重置客户密码
    listCustomer->customerController:将客户密码重置为12345678
    customerController -> db: 修改数据库密码信息
    db -> customerController: 返回修改结果
@enduml
@startuml
    actor 用户 as user
    actor 管理员 as admin
    boundary "商品界面" as goods
    control "商品管理器" as goodsController
    control "购物车管理器" as shoppingcartController
    database "数据库" as db
    user->goods:查看商品
    admin->goods:查看商品
    goods->goodsController:查询商品信息
    goodsController -> db: 查询商品信息
    db -> goodsController: 返回查询结果
    goodsController -> goods: 查询结果回显
    user->goods:添加商品到购物车
    goods->shoppingcartController:向购物车中添加商品
    shoppingcartController -> db: 向购物车中添加商品
    db -> shoppingcartController: 返回添加结果
    shoppingcartController -> goods: 返回添加结果
    admin->goods:填写添加商品信息
    goods->goodsController:添加商品
    goodsController -> db: 添加商品信息
    db -> goodsController: 返回添加结果
    goodsController -> goods: 返回添加结果
    admin->goods:填写修改商品信息
    goods->goodsController:修改商品相关信息
    goodsController -> db: 修改商品信息
    db -> goodsController: 返回修改结果
    goodsController -> goods: 返回修改结果
    admin->goods:发起删除商品请求
     goods->goodsController:删除商品
    goodsController -> db: 删除商品信息
    db -> goodsController: 返回删除结果
    goodsController -> goods: 返回删除结果
@enduml
@startuml
    actor 用户 as user
    boundary "购物车页面" as shoppingcart
    boundary "支付界面" as pay
    control "购物车管理器" as shoppingcartController
    control "支付管理器" as payController
    entity "订单" as order
    control "订单管理器" as orderController
    user->shoppingcart:查看购物车中商品
    shoppingcart->shoppingcartController:查询购物车
    user->shoppingcart:删除购物车中商品
    shoppingcart->shoppingcartController:删除购物车中商品
    user->shoppingcart:购买商品
    shoppingcart->pay:选择支付方式
    pay->payController:发送支付请求
    payController->shoppingcartController:返回支付结果
    shoppingcartController->shoppingcart:显示支付结果
    shoppingcartController->order:生成订单
    order->orderController:添加订单到数据库
@enduml
@startuml
    actor 用户 as user
    boundary "订单页面" as order
    control "订单管理器" as orderController
    database "数据库" as db
    user->order:查看历史订单
    order->orderController:查询历史订单信息
    orderController->db:查询历史订单信息
    db->orderController:返回订单信息
    orderController->order:订单信息回显
@enduml
@startuml
    actor 用户 as user
    boundary "前端页面" as page
    control "后端管理器" as controller
    entity "全局异常处理器" as expectation
    user-> page:访问前端页面
    page-> controller:向后端发起请求
    controller-->page:若无异常，向页面返回数据
    controller-->expectation:若发生异常，交给全局异常处理器处理
    expectation-->page:返回异常处理结果
@enduml